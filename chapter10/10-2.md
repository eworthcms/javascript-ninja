# 正则表达式进阶

## 正则表达式说明

正则表达式：使用模式匹配文本字符串的表达式。表达式本身具有用于定义模式的术语和操作符



与其他对象类型类似，创建正则表达式的有两种方式

* 使用正则表达式字面量
* 通过创建 RegExp 对象的实例



```javascript
//字面量创建正则表达式 精确匹配字符串test
const pattern = /test/

//创建RegExp实例,传入正则表达式字符串
const pattern = new RegExp("test");
```

当正则表达式在开发环境是明确的，推荐优先使用字面量语法；当需要在运行时动态创建字符串来构建正则表达式时，则使用构造函数的方式。



```javascript
//除了表达式本身,还有5个修饰符
i  对大小写不敏感
g  查找所有匹配项
m  允许多行匹配
y  开启粘连匹配
u  允许使用 Unicode 点转义符(\u{...})

//在字面量末尾添加修饰符(/test/ig),或作为第2个参数传给RegExp构造函数(new RegExp('test','ig'))
```



## 术语和操作符

### 精确匹配

除了非特殊字符或操作符之外，字符必须准确出现在表达式中。例如，正则 /test/ 中的4个字符，必须完全出现在所匹配的字符串中

一个接一个的字符直接连在一起，省略了操作符连接。因此 /test/ 的意思是 t 连接 e，e 连接 s，s 连接 t



### 匹配字符集

[abc] 表示匹配 a、b、c 中的任意**一个**字符。仅匹配一个字符。

[^abc] 匹配一组有限字符集以外的任意字符。表示匹配除了 a、b、c 以外的任意字符

[a-m] -中横线表示按字母顺序从a到m之间所有字符的集合



### 转义

匹配 `$` `[` 或 `^` 本身，需要用反斜线对其后面的字符进行转义，使其匹配字符本身的含义

`\[` 匹配 `[` 字符，而不再表示字符分组的括号。

双反斜线 `\\` 匹配一个反斜线。



### 起止符号

字符串的开始，或是字符串的结束。

`/^test/` 匹配的是 test 出现在字符串的开头

`/test$/` 匹配的是字符串的结束

`/^test$/` 匹配整个字符串



### 重复出现

* `?` 表示 0-1次
* `+ ` 表示 1-多次
* `*` 表示 0-多次
* `{4}` 表示4个连续的字符
* `{4,10}` 表示4-10个连续的字符
* `{4,}` 表示4个或更多个连续字符

这些运算符默认是 **贪婪模式** ，可以匹配所有可能的字符

在运算符后添加 `?` ，使得运算符变为 **非贪婪模式**，只进行最小限度的匹配



### 预定义字符集

```javascript
\t  水平制表符
\b  空格
\v  垂直制表符
\f  换页符
\r  回车符
\n  换行符
.   匹配除换行字符之外的任意字符
\d  匹配任意十进制数字 [0-9]
\D  匹配除了十进制数字外的任意字符 [^0-9]
\w  匹配任意字母、数字和下划线 [A-Za-z0-9_]
\W  匹配除了任何字母、数字和下划线之外的字符 [^A-Za-z0-9_]
\s  匹配任何空白字符
\S  匹配除空白字符外的任意字符
\b  匹配单词边界
\B  匹配非单词边界(单词内部)
```



### 分组

使用 `圆括号` 进行分组

`/(ab)+/` 匹配一个或多个连续的ab

**当正则的部分使用圆括号分组时具有两种功能，同时也创建捕获**



### 或操作符 OR

使用竖线 `|` 表示或

```javascript
/a|b/              //匹配a或者b
/(ab)+|(cd)+/      //匹配一个或多个ab或cd
```



### 反向引用

反向引用可引用正则中定义的捕获。反向引用分组中捕获的内容，使用反斜线加上数字表示引用，该数字从1开始，第一个分组捕获的为 `\1`，第二个为`\2`，以此类推

```javascript
/([dtn])a\1/
/<(\w+)>(.+)<\/\1>/   //匹配 <strong>whatever></strong>
```









